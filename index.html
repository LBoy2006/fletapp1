<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Mini App</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { background-color: #0b0b0b; }
    .page { background-color: #1a1a1a; }
    .nav-btn .icon { transition: transform 0.3s; }
    .nav-btn.active .icon { transform: scale(1.25); }
    .nav-btn.active { color: #39ff14; }
  </style>
</head>
<body class="h-screen flex flex-col text-white">

  <div id="pages" class="flex-grow relative overflow-hidden" style="touch-action: pan-y">
    <div id="pages-wrapper" class="flex h-full transition-transform duration-300" style="transform: translateX(-200%)">

      <section id="leaderboard" class="page w-full h-full flex-shrink-0 overflow-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Лидерборд</h2>
        <p>Здесь будет таблица лидеров.</p>
      </section>
      <section id="task" class="page w-full h-full flex-shrink-0 overflow-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Задание</h2>
        <p>Описание текущего задания.</p>
      </section>
      <section id="home" class="page w-full h-full flex-shrink-0 overflow-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Главная</h2>
        <p>Добро пожаловать в мини‑приложение!</p>
      </section>
      <section id="collections" class="page w-full h-full flex-shrink-0 overflow-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Рюкзак</h2>
        <p>Ваши собранные предметы.</p>
      </section>
      <section id="settings" class="page w-full h-full flex-shrink-0 overflow-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Настройки</h2>
        <p>Параметры приложения.</p>
      </section>
    </div>
  </div>

  <nav class="fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 flex text-center text-sm text-gray-400">
    <button data-page="leaderboard" class="nav-btn flex-1 py-3 flex flex-col items-center rounded">
      <i class="fas fa-trophy icon text-xl mb-1"></i>
      <span>Лидерборд</span>
    </button>
    <button data-page="task" class="nav-btn flex-1 py-3 flex flex-col items-center rounded">
      <i class="fas fa-clipboard-list icon text-xl mb-1"></i>
      <span>Задание</span>
    </button>
    <button data-page="home" class="nav-btn flex-1 py-3 flex flex-col items-center rounded">
      <i class="fas fa-home icon text-xl mb-1"></i>
      <span>Главная</span>
    </button>
    <button data-page="collections" class="nav-btn flex-1 py-3 flex flex-col items-center rounded">
      <i class="fas fa-boxes icon text-xl mb-1"></i>
      <span>Рюкзак</span>
    </button>
    <button data-page="settings" class="nav-btn flex-1 py-3 flex flex-col items-center rounded">
      <i class="fas fa-cog icon text-xl mb-1"></i>
      <span>Настройки</span>
    </button>
  </nav>

  <script>
    const wrapper = document.getElementById('pages-wrapper');
    const buttons = document.querySelectorAll('.nav-btn');

    const pageOrder = ['leaderboard', 'task', 'home', 'collections', 'settings'];
    let currentIndex = pageOrder.indexOf('home');

    function updateTransform() {
      wrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    function showPage(id) {
      currentIndex = pageOrder.indexOf(id);
      updateTransform();
      buttons.forEach(btn => {
        if (btn.dataset.page === id) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => showPage(btn.dataset.page));
    });

    const container = document.getElementById('pages');
    let startX = null;

    container.addEventListener('touchstart', e => {
      if (e.touches.length === 1) {
        startX = e.touches[0].clientX;
      }
    });

    container.addEventListener('touchend', e => {
      if (startX === null) return;
      const deltaX = e.changedTouches[0].clientX - startX;
      if (Math.abs(deltaX) > 50) {
        if (deltaX < 0 && currentIndex < pageOrder.length - 1) {
          showPage(pageOrder[currentIndex + 1]);
        } else if (deltaX > 0 && currentIndex > 0) {
          showPage(pageOrder[currentIndex - 1]);
        }
      }
      startX = null;
    });

    if (window.Telegram?.WebApp) {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
    }

    showPage('home');
  </script>
</body>
</html>
